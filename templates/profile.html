{% extends "base.html" %}
{% block content %}
  <div class="mb-4">
    <h2 class="fw-bold mb-1">הפרופיל שלי</h2>
    <p class="text-muted mb-0">עדכון פרטים וסיסמה.</p>
  </div>

  <div class="row g-4">
    <div class="col-lg-6">
      <div class="card-soft p-4 mb-4">
        <h5 class="fw-bold mb-3">תמונת פרופיל</h5>
        {% if current_user.profile_image %}
          <img src="{{ url_for('static', filename=current_user.profile_image) }}" alt="תמונת פרופיל" class="profile-avatar mb-3">
        {% endif %}
        <form method="post" enctype="multipart/form-data">
          {{ image_form.hidden_tag() }}
          <div class="mb-3">
            {{ image_form.image.label(class="form-label") }}
            {{ image_form.image(class="form-control") }}
          </div>
          <button type="submit" class="btn btn-primary w-100">{{ image_form.submit.label.text }}</button>
        </form>
      </div>

      <div class="card-soft p-4">
        <h5 class="fw-bold mb-3">עדכונים</h5>
        <p class="text-muted mb-0">ניהול מסמכים אינו פעיל כרגע.</p>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card-soft p-4">
        <h5 class="fw-bold mb-3">שינוי סיסמה</h5>
        <form method="post" novalidate>
          {{ password_form.hidden_tag() }}
          <div class="mb-3">
            {{ password_form.current_password.label(class="form-label") }}
            {{ password_form.current_password(class="form-control") }}
            {% for error in password_form.current_password.errors %}
              <div class="error-text">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="mb-3">
            {{ password_form.new_password.label(class="form-label") }}
            {{ password_form.new_password(class="form-control") }}
            {% for error in password_form.new_password.errors %}
              <div class="error-text">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="mb-3">
            {{ password_form.confirm_new_password.label(class="form-label") }}
            {{ password_form.confirm_new_password(class="form-control") }}
            {% for error in password_form.confirm_new_password.errors %}
              <div class="error-text">{{ error }}</div>
            {% endfor %}
          </div>
          <button type="submit" class="btn btn-primary w-100">{{ password_form.submit.label.text }}</button>
        </form>
      </div>
    </div>
  </div>
{% endblock %}
